<!DOCTYPE html>
<html>
<head>
    @{
        var userName = ViewBag.UserName;
        var lastName = ViewBag.LastName;
    }
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    @*<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>*@
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <style>
        @@import url('https://fonts.googleapis.com/css?family=Montserrat:400,700&display=swap');

        * {
            font-family: 'Montserrat', sans-serif;
        }
        .tabscontainer {
            margin-left: auto;
            display: flex;
            justify-content: start;

            @@media (max-width: 400px) {
                justify-content: center;
            }
        }

        .tabs {
            margin: 5px;
            display: inline-flex;
            align-items: center;
            @@media (max-width: 500px) {
                font-size: 12px;
                padding: 3px 5px;
            }

            @@media (max-width: 400px) {
                font-size: 10px; 
                padding: 3px 2px; 
            }
        }

            .tabs i {
                margin-right: 5px;
            }

        #history:hover{
            cursor: pointer;
        }

        .dropdown-container {
            position: relative;
            display: inline-block;
        }

        .dropdown-menu {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            z-index: 1;
        }

        .dropdown-container:hover .dropdown-menu {
            display: block;
        }
    </style>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var retrievedIsValid = sessionStorage.getItem("isValid");
            var retrievedIsLoggedIn = sessionStorage.getItem("isLoggedIn");

            // Convert the retrieved strings to boolean values
            retrievedIsValid = JSON.parse(retrievedIsValid);
            retrievedIsLoggedIn = JSON.parse(retrievedIsLoggedIn);

            // Conditionally render HTML based on the values
            if (retrievedIsValid === true || retrievedIsLoggedIn === true) {
                document.getElementById("conditionalButtons").innerHTML = `
                  <strong> <span style="color:lightgreen">E</span><span style="color:yellow">T</span><span style="color:red">H</span></strong>
                  <a class="btn" style="color: white;"><span><i class="bi bi-question"></i></span></a>
                    <div class="dropdown-container">
                        <button type="button" class="btn btn-light" style="color: black">
                        <img src="@ViewBag.Image" class="mr-2 rounded-circle" alt="User Image" style="width: 30px; height: 30px;">
                        <span>@ViewBag.UserName @ViewBag.MiddleName</span>
                        </button>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="/SignIn/Logout">Logout</a></li>
                            <li><a class="dropdown-item" id="history">History</a></li>
                            <li><a class="dropdown-item" href="#">Delete Account</a></li>
                            <li><a class="dropdown-item" href="#">Change Password</a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item" href="#">Privacy Policy</a></li>
                            <li><a class="dropdown-item" href="#">About</a></li>
                        </ul>
                 </div>
                `;
            } else {
                document.getElementById("conditionalButtons").innerHTML = `
                                        <a class="btn" style="color: white;"><span><i class="bi bi-question"></i></span></a>
                                        <a class="btn" style="color: white;">List your property</a>
                                        <a href="/SignUp" class="btn btn-light">Register</a>
                                        <a href="/SignIn" class="btn btn-light">Login</a>
                                    `;
            }
            $('.logout').on('click', function () {
                localStorage.removeItem("phone");
                sessionStorage.removeItem("phone");
            });
            $('#history').click(function (e) {
                e.preventDefault();
                var phoneNumber = localStorage.getItem("phone") || sessionStorage.getItem("phone");
                if (phoneNumber != null) {
                    var form = $('<form action="/History" method="post"></form>');
                    form.append('<input type="hidden" name="phoneNumber" value="' + phoneNumber + '">');
                    $('body').append(form);
                    form.submit();
                }
            });
        });

    </script>
</head>
<body>
    <div class="container-fluid pb-2" style="background-color:#063970;">
        <div class="container pt-3">
            <div class="row">
                <div class="col-md-7">
                    <nav class="navbar navbar-light">
                        <div class="container">
                            <a class="navbar-brand" asp-controller="Home" asp-action="Index" style="color: white;">
                                Hulubeje Booking
                            </a>
                        </div>
                    </nav>
                </div>
                <div class="col-md-5">
                    <div class="ml-4 pt-2" id="conditionalButtons" style="margin-left:auto">
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="tabscontainer pt-2 ml-lg-4">
                    <a asp-action="Index" asp-controller="HotelHome" type="button" class="tabs btn mt-2 btn-outline-primary rounded" style="color: white; border-radius: 50%"><span style="display: inline-block"><i class="bi bi-house"></i></span> Hotels</a>
                    <a asp-action="Index" asp-controller="CinemaHome" type="button" class="tabs mt-2 btn btn-outline-primary rounded" style="color: white;"><span> <i class="bi bi-film"></i></span> Cinema</a>
                    <a asp-controller="BusHome" asp-action="Index" type="button" class="tabs btn  mt-2 btn-outline-primary rounded" style="color: white;"><span><i class="bi bi-bus-front"></i></span> Bus</a>
                    <a href="#" type="button" class="tabs btn btn-outline-primary mt-2 rounded" style="color: white;"><span><i class="fa-solid fa-theater-masks"></i></span> Event</a>
                    <a href="#" type="button" class="tabs btn btn-outline-primary mt-2 rounded" style="color: white;"><span><i class="fas fa-spa"></i></span> Spa</a>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
